prompt --application/pages/page_00100beginwwv_flow_api.create_page( p_id=>100,p_user_interface_id=>wwv_flow_api.id(327304041051455600),p_name=>'Register ',p_page_mode=>'MODAL',p_step_title=>'Register Page',p_step_sub_title_type=>'TEXT_WITH_SUBSTITUTIONS',p_first_item=>'NO_FIRST_ITEM',p_autocomplete_on_off=>'OFF',p_javascript_code=>'var htmldb_delete_message=''"DELETE_CONFIRM_MSG"'';',p_page_template_options=>'#DEFAULT#',p_dialog_chained=>'Y',p_overwrite_navigation_list=>'N',p_page_is_public_y_n=>'Y',p_protection_level=>'C',p_cache_mode=>'NOCACHE',p_last_updated_by=>'defaultUser',p_last_upd_yyyymmddhh24miss=>'20000101000000');wwv_flow_api.create_page_plug( p_id=>wwv_flow_api.id(328026688503053189),p_plug_name=>'Register ',p_region_template_options=>'#DEFAULT#',p_plug_template=>wwv_flow_api.id(327260456234455539),p_plug_display_sequence=>10,p_include_in_reg_disp_sel_yn=>'N',p_plug_display_point=>'BODY',p_plug_query_row_template=>1,p_plug_query_options=>'DERIVED_REPORT_COLUMNS',p_attribute_01=>'N',p_attribute_02=>'TEXT',p_attribute_03=>'Y');wwv_flow_api.create_page_plug( p_id=>wwv_flow_api.id(351684464717319211),p_plug_name=>'You already have an account?',p_region_template_options=>'#DEFAULT#:is-expanded:t-Region--scrollBody',p_plug_template=>wwv_flow_api.id(327265108815455542),p_plug_display_sequence=>20,p_include_in_reg_disp_sel_yn=>'Y',p_plug_display_point=>'BODY',p_plug_query_options=>'DERIVED_REPORT_COLUMNS',p_attribute_01=>'N',p_attribute_02=>'HTML');wwv_flow_api.create_page_button( p_id=>wwv_flow_api.id(328027079249053190),p_button_sequence=>10,p_button_plug_id=>wwv_flow_api.id(328026688503053189),p_button_name=>'CREATE',p_button_action=>'SUBMIT',p_button_template_options=>'#DEFAULT#',p_button_template_id=>wwv_flow_api.id(327293267790455585),p_button_is_hot=>'Y',p_button_image_alt=>'Register',p_button_position=>'BELOW_BOX',p_button_condition=>'P100_USER_ID',p_button_condition_type=>'ITEM_IS_NULL');wwv_flow_api.create_page_button( p_id=>wwv_flow_api.id(351684683534319213),p_button_sequence=>10,p_button_plug_id=>wwv_flow_api.id(351684464717319211),p_button_name=>'LOGIN',p_button_action=>'REDIRECT_PAGE',p_button_template_options=>'#DEFAULT#:t-Button--iconLeft',p_button_template_id=>wwv_flow_api.id(327293304788455585),p_button_image_alt=>'Go to login page',p_button_position=>'BODY',p_button_redirect_url=>'f?p=&APP_ID.:101:&SESSION.::&DEBUG.:RP::',p_icon_css_classes=>'fa-hand-o-right',p_grid_new_row=>'Y');wwv_flow_api.create_page_button( p_id=>wwv_flow_api.id(328027185258053190),p_button_sequence=>40,p_button_plug_id=>wwv_flow_api.id(328026688503053189),p_button_name=>'SAVE',p_button_action=>'SUBMIT',p_button_template_options=>'#DEFAULT#',p_button_template_id=>wwv_flow_api.id(327293267790455585),p_button_is_hot=>'Y',p_button_image_alt=>'Save',p_button_position=>'REGION_TEMPLATE_CHANGE',p_button_condition=>'P100_USER_ID',p_button_condition_type=>'ITEM_IS_NOT_NULL',p_grid_new_row=>'Y',p_database_action=>'UPDATE');wwv_flow_api.create_page_button( p_id=>wwv_flow_api.id(328027331940053190),p_button_sequence=>20,p_button_plug_id=>wwv_flow_api.id(328026688503053189),p_button_name=>'CANCEL',p_button_action=>'REDIRECT_PAGE',p_button_template_options=>'#DEFAULT#',p_button_template_id=>wwv_flow_api.id(327293267790455585),p_button_image_alt=>'Cancel',p_button_position=>'REGION_TEMPLATE_CLOSE',p_button_redirect_url=>'f?p=&APP_ID.:1:&SESSION.::&DEBUG.:::',p_grid_new_row=>'Y');wwv_flow_api.create_page_button( p_id=>wwv_flow_api.id(328027253140053190),p_button_sequence=>30,p_button_plug_id=>wwv_flow_api.id(328026688503053189),p_button_name=>'DELETE',p_button_action=>'REDIRECT_URL',p_button_template_options=>'#DEFAULT#',p_button_template_id=>wwv_flow_api.id(327293267790455585),p_button_image_alt=>'Delete',p_button_position=>'REGION_TEMPLATE_DELETE',p_button_redirect_url=>'javascript:apex.confirm(htmldb_delete_message,''DELETE'');',p_button_execute_validations=>'N',p_button_condition=>'P100_USER_ID',p_button_condition_type=>'ITEM_IS_NOT_NULL',p_grid_new_row=>'Y',p_database_action=>'DELETE');wwv_flow_api.create_page_branch( p_id=>wwv_flow_api.id(328028917918053195),p_branch_name=>'Go To Page 101',p_branch_action=>'f?p=&APP_ID.:101:&SESSION.::&DEBUG.:::&success_msg=#SUCCESS_MSG#',p_branch_point=>'AFTER_PROCESSING',p_branch_type=>'REDIRECT_URL',p_branch_sequence=>1);wwv_flow_api.create_page_item( p_id=>wwv_flow_api.id(327598107043222348),p_name=>'P100_USER_PWD_CHECK',p_is_required=>true,p_item_sequence=>30,p_item_plug_id=>wwv_flow_api.id(328026688503053189),p_use_cache_before_default=>'NO',p_prompt=>'Password verification',p_source=>'USER_PASSWORD',p_source_type=>'DB_COLUMN',p_display_as=>'NATIVE_PASSWORD',p_cSize=>32,p_cMaxlength=>30,p_begin_on_new_line=>'N',p_begin_on_new_field=>'N',p_field_template=>wwv_flow_api.id(327292952744455582),p_item_template_options=>'#DEFAULT#',p_restricted_characters=>'NO_SPECIAL_CHAR_NL',p_attribute_01=>'Y',p_attribute_02=>'Y');wwv_flow_api.create_page_item( p_id=>wwv_flow_api.id(328029378627053196),p_name=>'P100_USER_ID',p_item_sequence=>50,p_item_plug_id=>wwv_flow_api.id(328026688503053189),p_use_cache_before_default=>'NO',p_source=>'USER_ID',p_source_type=>'DB_COLUMN',p_display_as=>'NATIVE_HIDDEN',p_protection_level=>'S',p_attribute_01=>'Y');wwv_flow_api.create_page_item( p_id=>wwv_flow_api.id(328029766781053235),p_name=>'P100_USER_FIRSTNAME',p_is_required=>true,p_item_sequence=>40,p_item_plug_id=>wwv_flow_api.id(328026688503053189),p_use_cache_before_default=>'NO',p_prompt=>'Firstname',p_source=>'USER_FIRSTNAME',p_source_type=>'DB_COLUMN',p_display_as=>'NATIVE_TEXT_FIELD',p_cSize=>32,p_cMaxlength=>80,p_begin_on_new_line=>'N',p_begin_on_new_field=>'N',p_field_template=>wwv_flow_api.id(327292952744455582),p_item_template_options=>'#DEFAULT#',p_restricted_characters=>'NO_SPECIAL_CHAR_NL',p_help_text=>'Your firstname needs to contain at least 2 characters.',p_attribute_01=>'Y',p_attribute_02=>'N',p_attribute_04=>'TEXT',p_attribute_05=>'NONE');wwv_flow_api.create_page_item( p_id=>wwv_flow_api.id(328030148889053239),p_name=>'P100_USER_LASTNAME',p_is_required=>true,p_item_sequence=>60,p_item_plug_id=>wwv_flow_api.id(328026688503053189),p_use_cache_before_default=>'NO',p_prompt=>'Lastname',p_source=>'USER_LASTNAME',p_source_type=>'DB_COLUMN',p_display_as=>'NATIVE_TEXT_FIELD',p_cSize=>32,p_cMaxlength=>80,p_begin_on_new_line=>'N',p_begin_on_new_field=>'N',p_field_template=>wwv_flow_api.id(327292952744455582),p_item_template_options=>'#DEFAULT#',p_restricted_characters=>'NO_SPECIAL_CHAR_NL',p_help_text=>'Your lastname needs to contain at least 2 characters.',p_attribute_01=>'Y',p_attribute_02=>'N',p_attribute_04=>'TEXT',p_attribute_05=>'NONE');wwv_flow_api.create_page_item( p_id=>wwv_flow_api.id(328030559653053239),p_name=>'P100_USER_EMAIL',p_is_required=>true,p_item_sequence=>10,p_item_plug_id=>wwv_flow_api.id(328026688503053189),p_use_cache_before_default=>'NO',p_prompt=>'Email',p_source=>'USER_EMAIL',p_source_type=>'DB_COLUMN',p_display_as=>'NATIVE_TEXT_FIELD',p_cSize=>32,p_cMaxlength=>80,p_field_template=>wwv_flow_api.id(327292952744455582),p_item_template_options=>'#DEFAULT#',p_restricted_characters=>'NO_SPECIAL_CHAR_NL',p_help_text=>'Your email will be required for authentication.',p_attribute_01=>'Y',p_attribute_02=>'N',p_attribute_04=>'TEXT',p_attribute_05=>'BOTH');wwv_flow_api.create_page_item( p_id=>wwv_flow_api.id(328030948178053239),p_name=>'P100_USER_PASSWORD',p_is_required=>true,p_item_sequence=>20,p_item_plug_id=>wwv_flow_api.id(328026688503053189),p_use_cache_before_default=>'NO',p_prompt=>'Password',p_source=>'USER_PASSWORD',p_source_type=>'DB_COLUMN',p_display_as=>'NATIVE_PASSWORD',p_cSize=>32,p_cMaxlength=>30,p_begin_on_new_line=>'N',p_begin_on_new_field=>'N',p_field_template=>wwv_flow_api.id(327292952744455582),p_item_template_options=>'#DEFAULT#',p_restricted_characters=>'NO_SPECIAL_CHAR_NL',p_help_text=>'Your password needs to contain at least 6 characters and no special characters such as &<>"/;,*|=% or --.',p_attribute_01=>'Y',p_attribute_02=>'Y');wwv_flow_api.create_page_item( p_id=>wwv_flow_api.id(328031388081053239),p_name=>'P100_USER_PHONE',p_item_sequence=>70,p_item_plug_id=>wwv_flow_api.id(328026688503053189),p_use_cache_before_default=>'NO',p_prompt=>'Phone',p_source=>'USER_PHONE',p_source_type=>'DB_COLUMN',p_display_as=>'NATIVE_NUMBER_FIELD',p_cSize=>32,p_cMaxlength=>255,p_begin_on_new_line=>'N',p_begin_on_new_field=>'N',p_field_template=>wwv_flow_api.id(327292794678455582),p_item_template_options=>'#DEFAULT#',p_restricted_characters=>'US_ONLY',p_attribute_03=>'right');wwv_flow_api.create_page_item( p_id=>wwv_flow_api.id(328031691200053240),p_name=>'P100_USER_INVOICING_ADDRESS',p_is_required=>true,p_item_sequence=>80,p_item_plug_id=>wwv_flow_api.id(328026688503053189),p_use_cache_before_default=>'NO',p_prompt=>'Invoicing address',p_source=>'USER_INVOICING_ADDRESS',p_source_type=>'DB_COLUMN',p_display_as=>'NATIVE_TEXTAREA',p_cSize=>60,p_cMaxlength=>240,p_cHeight=>4,p_begin_on_new_line=>'N',p_begin_on_new_field=>'N',p_field_template=>wwv_flow_api.id(327292952744455582),p_item_template_options=>'#DEFAULT#',p_restricted_characters=>'NO_SPECIAL_CHAR',p_attribute_01=>'Y',p_attribute_02=>'N',p_attribute_03=>'N',p_attribute_04=>'BOTH');wwv_flow_api.create_page_item( p_id=>wwv_flow_api.id(328032168706053240),p_name=>'P100_USER_DELIVERY_ADDRESS',p_item_sequence=>100,p_item_plug_id=>wwv_flow_api.id(328026688503053189),p_use_cache_before_default=>'NO',p_prompt=>'Delivery Address',p_source=>'USER_DELIVERY_ADDRESS',p_source_type=>'DB_COLUMN',p_display_as=>'NATIVE_TEXTAREA',p_cSize=>60,p_cMaxlength=>240,p_cHeight=>4,p_begin_on_new_line=>'N',p_begin_on_new_field=>'N',p_field_template=>wwv_flow_api.id(327292794678455582),p_item_template_options=>'#DEFAULT#',p_restricted_characters=>'NO_SPECIAL_CHAR',p_attribute_01=>'Y',p_attribute_02=>'N',p_attribute_03=>'N',p_attribute_04=>'BOTH');wwv_flow_api.create_page_item( p_id=>wwv_flow_api.id(328677080134216310),p_name=>'P100_SAME_ADDRESS',p_item_sequence=>90,p_item_plug_id=>wwv_flow_api.id(328026688503053189),p_item_default=>'Y',p_prompt=>'Use same address for delivery',p_display_as=>'NATIVE_SELECT_LIST',p_lov=>'STATIC:Yes;Y,No;N',p_cHeight=>1,p_begin_on_new_line=>'N',p_begin_on_new_field=>'N',p_field_template=>wwv_flow_api.id(327292794678455582),p_item_template_options=>'#DEFAULT#',p_lov_display_extra=>'NO',p_attribute_01=>'NONE',p_attribute_02=>'N');wwv_flow_api.create_page_validation( p_id=>wwv_flow_api.id(328676216890216302),p_validation_name=>'Check if email is already used',p_validation_sequence=>10,p_validation=>wwv_flow_string.join(wwv_flow_t_varchar2('begin','RETURN not SOK_USER_UTIL.user_email_exists(val_user_email => :P100_USER_EMAIL);','end;')),p_validation_type=>'FUNC_BODY_RETURNING_BOOLEAN',p_error_message=>'qsdfghj',p_always_execute=>'N',p_associated_item=>wwv_flow_api.id(328030559653053239),p_error_display_location=>'INLINE_WITH_FIELD_AND_NOTIFICATION');wwv_flow_api.create_page_validation( p_id=>wwv_flow_api.id(328676480098216304),p_validation_name=>'Check if email in right format',p_validation_sequence=>20,p_validation=>wwv_flow_string.join(wwv_flow_t_varchar2('declare','begin','  return REGEXP_LIKE (:P100_USER_EMAIL,''^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$'');','end;')),p_validation_type=>'FUNC_BODY_RETURNING_BOOLEAN',p_error_message=>'Email is not in the correct format. Please review and update.',p_always_execute=>'N',p_associated_item=>wwv_flow_api.id(328030559653053239),p_error_display_location=>'INLINE_WITH_FIELD_AND_NOTIFICATION');wwv_flow_api.create_page_validation( p_id=>wwv_flow_api.id(328676519724216305),p_validation_name=>'Check if password is identical',p_validation_sequence=>30,p_validation=>wwv_flow_string.join(wwv_flow_t_varchar2('declare','begin','  if :P100_USER_PASSWORD = :P100_USER_PWD_CHECK then','    return true;','  else','    return false;','  end if;','end;')),p_validation_type=>'FUNC_BODY_RETURNING_BOOLEAN',p_error_message=>'You haven''t entered the same password in the fields. Please review and correct.',p_always_execute=>'N',p_associated_item=>wwv_flow_api.id(327598107043222348),p_error_display_location=>'INLINE_WITH_FIELD_AND_NOTIFICATION');wwv_flow_api.create_page_validation( p_id=>wwv_flow_api.id(328676651354216306),p_validation_name=>'Check password length',p_validation_sequence=>40,p_validation=>wwv_flow_string.join(wwv_flow_t_varchar2('declare','begin','  if LENGTH(:P100_USER_PASSWORD) >= 6 then','    return true;','  else','    return false;','  end if;','end;')),p_validation_type=>'FUNC_BODY_RETURNING_BOOLEAN',p_error_message=>'Your password needs to contain at least 6 characters. Please review and update.',p_always_execute=>'N',p_associated_item=>wwv_flow_api.id(328030948178053239),p_error_display_location=>'INLINE_WITH_FIELD_AND_NOTIFICATION');wwv_flow_api.create_page_validation( p_id=>wwv_flow_api.id(328676692554216307),p_validation_name=>'Check firstname length',p_validation_sequence=>50,p_validation=>wwv_flow_string.join(wwv_flow_t_varchar2('declare','begin','  if LENGTH(:P100_USER_FIRSTNAME) >= 2 then','    return true;','  else','    return false;','  end if;','end;')),p_validation_type=>'FUNC_BODY_RETURNING_BOOLEAN',p_error_message=>'Your firstname needs to contain at least 2 characters. Please review and update.',p_always_execute=>'N',p_associated_item=>wwv_flow_api.id(328029766781053235),p_error_display_location=>'INLINE_WITH_FIELD_AND_NOTIFICATION');wwv_flow_api.create_page_validation( p_id=>wwv_flow_api.id(328676794926216308),p_validation_name=>'Check lastname length',p_validation_sequence=>60,p_validation=>wwv_flow_string.join(wwv_flow_t_varchar2('declare','begin','  if LENGTH(:P100_USER_LASTNAME) >= 2 then','    return true;','  else','    return false;','  end if;','end;')),p_validation_type=>'FUNC_BODY_RETURNING_BOOLEAN',p_error_message=>'Your lastname needs to contain at least 2 characters. Please review and update.',p_always_execute=>'N',p_associated_item=>wwv_flow_api.id(328030148889053239),p_error_display_location=>'INLINE_WITH_FIELD_AND_NOTIFICATION');wwv_flow_api.create_page_validation( p_id=>wwv_flow_api.id(328680364994216343),p_validation_name=>'Check delivery address ',p_validation_sequence=>70,p_validation=>wwv_flow_string.join(wwv_flow_t_varchar2('begin','  if :P100_same_address = ''Y'' OR :P100_user_delivery_address IS NOT NULL THEN','    return true;','  elsif :P100_loc_same_address = ''N'' OR :P100_user_delivery_address IS NULL THEN','    return false;','  end if;','end;')),p_validation_type=>'FUNC_BODY_RETURNING_BOOLEAN',p_error_message=>'"Use same address for delivery" is set as "N" but delivery field is empty. Please review.',p_always_execute=>'N',p_associated_item=>wwv_flow_api.id(328032168706053240),p_error_display_location=>'INLINE_WITH_FIELD');wwv_flow_api.create_page_da_event( p_id=>wwv_flow_api.id(328677733088216317),p_name=>'Invoicing and delivery address',p_event_sequence=>10,p_triggering_element_type=>'ITEM',p_triggering_element=>'P100_SAME_ADDRESS',p_condition_element=>'P100_SAME_ADDRESS',p_triggering_condition_type=>'EQUALS',p_triggering_expression=>'Y',p_bind_type=>'bind',p_bind_event_type=>'change');wwv_flow_api.create_page_da_action( p_id=>wwv_flow_api.id(328677836424216318),p_event_id=>wwv_flow_api.id(328677733088216317),p_event_result=>'TRUE',p_action_sequence=>10,p_execute_on_page_init=>'Y',p_action=>'NATIVE_HIDE',p_affected_elements_type=>'ITEM',p_affected_elements=>'P100_USER_DELIVERY_ADDRESS',p_attribute_01=>'N');wwv_flow_api.create_page_da_action( p_id=>wwv_flow_api.id(328677941199216319),p_event_id=>wwv_flow_api.id(328677733088216317),p_event_result=>'FALSE',p_action_sequence=>10,p_execute_on_page_init=>'Y',p_action=>'NATIVE_SHOW',p_affected_elements_type=>'ITEM',p_affected_elements=>'P100_USER_DELIVERY_ADDRESS',p_attribute_01=>'N');wwv_flow_api.create_page_process( p_id=>wwv_flow_api.id(328032980549053243),p_process_sequence=>10,p_process_point=>'AFTER_HEADER',p_process_type=>'NATIVE_FORM_FETCH',p_process_name=>'Fetch Row from SOK_USER',p_attribute_02=>'SOK_USER',p_attribute_03=>'P100_USER_ID',p_attribute_04=>'USER_ID');wwv_flow_api.create_page_process( p_id=>wwv_flow_api.id(328033300855053243),p_process_sequence=>20,p_process_point=>'AFTER_SUBMIT',p_process_type=>'NATIVE_PLSQL',p_process_name=>'Register User',p_process_sql_clob=>wwv_flow_string.join(wwv_flow_t_varchar2('declare','begin','  if :P100_SAME_ADDRESS = ''Y'' then','    :P100_USER_DELIVERY_ADDRESS := :P100_USER_INVOICING_ADDRESS;','  end if;','  SOK_USER_UTIL.register_user(','      val_user_firstname => :P100_USER_FIRSTNAME,','      val_user_lastname => :P100_USER_LASTNAME,','      val_user_email => :P100_USER_EMAIL,','      val_user_password => TRIM(:P100_USER_PASSWORD),','      val_user_phone => null,','      val_user_invoicing_address => :P100_USER_INVOICING_ADDRESS,','      val_user_delivery_address => :P100_USER_DELIVERY_ADDRESS','  );','  ','end;')),p_error_display_location=>'INLINE_IN_NOTIFICATION',p_process_when_button_id=>wwv_flow_api.id(328027079249053190),p_process_success_message=>'Congratulations, you''ve registered successfully !');wwv_flow_api.create_page_process( p_id=>wwv_flow_api.id(328033697332053243),p_process_sequence=>40,p_process_point=>'AFTER_SUBMIT',p_process_type=>'NATIVE_SESSION_STATE',p_process_name=>'reset page',p_attribute_01=>'CLEAR_CACHE_CURRENT_PAGE',p_error_display_location=>'INLINE_IN_NOTIFICATION',p_process_when_button_id=>wwv_flow_api.id(328027079249053190));end;/