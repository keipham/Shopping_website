prompt --application/pages/page_00201beginwwv_flow_api.create_page( p_id=>201,p_user_interface_id=>wwv_flow_api.id(327304041051455600),p_name=>'C_U_D User',p_page_mode=>'MODAL',p_step_title=>'User management',p_step_sub_title_type=>'TEXT_WITH_SUBSTITUTIONS',p_first_item=>'NO_FIRST_ITEM',p_autocomplete_on_off=>'OFF',p_javascript_code=>'var htmldb_delete_message=''"DELETE_CONFIRM_MSG"'';',p_page_template_options=>'#DEFAULT#',p_dialog_chained=>'Y',p_overwrite_navigation_list=>'N',p_page_is_public_y_n=>'N',p_protection_level=>'C',p_cache_mode=>'NOCACHE',p_last_updated_by=>'defaultUser',p_last_upd_yyyymmddhh24miss=>'20000101000000');wwv_flow_api.create_page_plug( p_id=>wwv_flow_api.id(327527288730048954),p_plug_name=>'Form on SOK_USER',p_region_template_options=>'#DEFAULT#',p_plug_template=>wwv_flow_api.id(327260456234455539),p_plug_display_sequence=>20,p_include_in_reg_disp_sel_yn=>'N',p_plug_display_point=>'BODY',p_plug_query_row_template=>1,p_plug_query_options=>'DERIVED_REPORT_COLUMNS',p_attribute_01=>'N',p_attribute_02=>'TEXT',p_attribute_03=>'Y');wwv_flow_api.create_page_plug( p_id=>wwv_flow_api.id(327527918438048956),p_plug_name=>'Buttons',p_region_template_options=>'#DEFAULT#',p_plug_template=>wwv_flow_api.id(327260825035455539),p_plug_display_sequence=>10,p_include_in_reg_disp_sel_yn=>'N',p_plug_display_point=>'REGION_POSITION_03',p_plug_query_row_template=>1,p_attribute_01=>'N',p_attribute_02=>'TEXT',p_attribute_03=>'Y');wwv_flow_api.create_page_button( p_id=>wwv_flow_api.id(327528363027048956),p_button_sequence=>10,p_button_plug_id=>wwv_flow_api.id(327527918438048956),p_button_name=>'CANCEL',p_button_action=>'DEFINED_BY_DA',p_button_template_options=>'#DEFAULT#',p_button_template_id=>wwv_flow_api.id(327293267790455585),p_button_image_alt=>'Cancel',p_button_position=>'REGION_TEMPLATE_CLOSE',p_grid_new_grid=>false);wwv_flow_api.create_page_button( p_id=>wwv_flow_api.id(327527818534048956),p_button_sequence=>20,p_button_plug_id=>wwv_flow_api.id(327527918438048956),p_button_name=>'DELETE',p_button_action=>'REDIRECT_URL',p_button_template_options=>'#DEFAULT#',p_button_template_id=>wwv_flow_api.id(327293267790455585),p_button_image_alt=>'Delete',p_button_position=>'REGION_TEMPLATE_DELETE',p_button_redirect_url=>'javascript:apex.confirm(''Are you sure you want to delete this user?'',''DELETE'');',p_button_execute_validations=>'N',p_button_condition=>'P201_USER_ID',p_button_condition_type=>'ITEM_IS_NOT_NULL');wwv_flow_api.create_page_button( p_id=>wwv_flow_api.id(327527719613048956),p_button_sequence=>30,p_button_plug_id=>wwv_flow_api.id(327527918438048956),p_button_name=>'SAVE',p_button_action=>'SUBMIT',p_button_template_options=>'#DEFAULT#',p_button_template_id=>wwv_flow_api.id(327293267790455585),p_button_is_hot=>'Y',p_button_image_alt=>'Save',p_button_position=>'REGION_TEMPLATE_NEXT',p_button_condition=>'P201_USER_ID',p_button_condition_type=>'ITEM_IS_NOT_NULL',p_security_scheme=>wwv_flow_api.id(328321042163774142));wwv_flow_api.create_page_button( p_id=>wwv_flow_api.id(327527646758048956),p_button_sequence=>50,p_button_plug_id=>wwv_flow_api.id(327527918438048956),p_button_name=>'CREATE',p_button_action=>'SUBMIT',p_button_template_options=>'#DEFAULT#',p_button_template_id=>wwv_flow_api.id(327293267790455585),p_button_is_hot=>'Y',p_button_image_alt=>'Create',p_button_position=>'REGION_TEMPLATE_NEXT',p_button_condition=>'P201_USER_ID',p_button_condition_type=>'ITEM_IS_NULL',p_security_scheme=>wwv_flow_api.id(328224405980893970),p_database_action=>'INSERT');wwv_flow_api.create_page_branch( p_id=>wwv_flow_api.id(329195154474339521),p_branch_name=>'Go To Page 200',p_branch_action=>'f?p=&APP_ID.:200:&SESSION.::&DEBUG.:RP::&success_msg=#SUCCESS_MSG#',p_branch_point=>'AFTER_PROCESSING',p_branch_type=>'REDIRECT_URL',p_branch_sequence=>10);wwv_flow_api.create_page_item( p_id=>wwv_flow_api.id(327400144344290338),p_name=>'P201_ROLE',p_is_required=>true,p_item_sequence=>110,p_item_plug_id=>wwv_flow_api.id(327527288730048954),p_prompt=>'Role',p_source=>'USER',p_source_type=>'STATIC',p_display_as=>'NATIVE_CHECKBOX',p_named_lov=>'ROLE_LOV',p_lov=>'select role_name ,role_code from SOK_ROLE_LU order by role_name;',p_lov_display_null=>'YES',p_field_template=>wwv_flow_api.id(327292952744455582),p_item_template_options=>'#DEFAULT#',p_lov_display_extra=>'YES',p_attribute_01=>'2');wwv_flow_api.create_page_item( p_id=>wwv_flow_api.id(327530744087048965),p_name=>'P201_USER_ID',p_item_sequence=>20,p_item_plug_id=>wwv_flow_api.id(327527288730048954),p_use_cache_before_default=>'NO',p_source=>'USER_ID',p_source_type=>'DB_COLUMN',p_display_as=>'NATIVE_HIDDEN',p_protection_level=>'S',p_attribute_01=>'Y');wwv_flow_api.create_page_item( p_id=>wwv_flow_api.id(327531121600048987),p_name=>'P201_USER_FIRSTNAME',p_is_required=>true,p_item_sequence=>30,p_item_plug_id=>wwv_flow_api.id(327527288730048954),p_use_cache_before_default=>'NO',p_prompt=>'Firstname',p_source=>'USER_FIRSTNAME',p_source_type=>'DB_COLUMN',p_display_as=>'NATIVE_TEXT_FIELD',p_cSize=>32,p_cMaxlength=>80,p_field_template=>wwv_flow_api.id(327292952744455582),p_item_template_options=>'#DEFAULT#',p_help_text=>'User''s firstname needs to contain at least 2 characters.',p_attribute_01=>'N',p_attribute_02=>'N',p_attribute_04=>'TEXT',p_attribute_05=>'NONE');wwv_flow_api.create_page_item( p_id=>wwv_flow_api.id(327531581984048990),p_name=>'P201_USER_LASTNAME',p_is_required=>true,p_item_sequence=>40,p_item_plug_id=>wwv_flow_api.id(327527288730048954),p_use_cache_before_default=>'NO',p_prompt=>'Lastname',p_source=>'USER_LASTNAME',p_source_type=>'DB_COLUMN',p_display_as=>'NATIVE_TEXT_FIELD',p_cSize=>32,p_cMaxlength=>80,p_field_template=>wwv_flow_api.id(327292952744455582),p_item_template_options=>'#DEFAULT#',p_help_text=>'User''s lastname needs to contain at least 2 characters.',p_attribute_01=>'N',p_attribute_02=>'N',p_attribute_04=>'TEXT',p_attribute_05=>'NONE');wwv_flow_api.create_page_item( p_id=>wwv_flow_api.id(327531904913048992),p_name=>'P201_USER_EMAIL',p_is_required=>true,p_item_sequence=>50,p_item_plug_id=>wwv_flow_api.id(327527288730048954),p_use_cache_before_default=>'NO',p_prompt=>'Email',p_source=>'USER_EMAIL',p_source_type=>'DB_COLUMN',p_display_as=>'NATIVE_TEXT_FIELD',p_cSize=>32,p_cMaxlength=>80,p_field_template=>wwv_flow_api.id(327292952744455582),p_item_template_options=>'#DEFAULT#',p_attribute_01=>'N',p_attribute_02=>'N',p_attribute_04=>'TEXT',p_attribute_05=>'BOTH');wwv_flow_api.create_page_item( p_id=>wwv_flow_api.id(327532306500048992),p_name=>'P201_USER_PASSWORD',p_item_sequence=>70,p_item_plug_id=>wwv_flow_api.id(327527288730048954),p_use_cache_before_default=>'NO',p_prompt=>'Password',p_source=>'USER_PASSWORD',p_source_type=>'DB_COLUMN',p_display_as=>'NATIVE_PASSWORD',p_cSize=>32,p_cMaxlength=>30,p_display_when=>'P201_USER_ID',p_display_when_type=>'ITEM_IS_NULL',p_field_template=>wwv_flow_api.id(327292952744455582),p_item_template_options=>'#DEFAULT#',p_help_text=>'User''s password needs to contain at least 6 characters.',p_attribute_01=>'Y',p_attribute_02=>'Y');wwv_flow_api.create_page_item( p_id=>wwv_flow_api.id(327532705735048992),p_name=>'P201_USER_PHONE',p_item_sequence=>60,p_item_plug_id=>wwv_flow_api.id(327527288730048954),p_use_cache_before_default=>'NO',p_prompt=>'Phone',p_source=>'USER_PHONE',p_source_type=>'DB_COLUMN',p_display_as=>'NATIVE_NUMBER_FIELD',p_cSize=>32,p_cMaxlength=>255,p_field_template=>wwv_flow_api.id(327292794678455582),p_item_template_options=>'#DEFAULT#',p_help_text=>'Please drop me a msg',p_attribute_03=>'right');wwv_flow_api.create_page_item( p_id=>wwv_flow_api.id(327533145016048992),p_name=>'P201_USER_INVOICING_ADDRESS',p_is_required=>true,p_item_sequence=>80,p_item_plug_id=>wwv_flow_api.id(327527288730048954),p_use_cache_before_default=>'NO',p_prompt=>'Invoicing address',p_source=>'USER_INVOICING_ADDRESS',p_source_type=>'DB_COLUMN',p_display_as=>'NATIVE_TEXTAREA',p_cSize=>60,p_cMaxlength=>240,p_cHeight=>4,p_field_template=>wwv_flow_api.id(327292952744455582),p_item_template_options=>'#DEFAULT#',p_attribute_01=>'Y',p_attribute_02=>'N',p_attribute_03=>'N',p_attribute_04=>'BOTH');wwv_flow_api.create_page_item( p_id=>wwv_flow_api.id(327533526583048993),p_name=>'P201_USER_DELIVERY_ADDRESS',p_item_sequence=>100,p_item_plug_id=>wwv_flow_api.id(327527288730048954),p_use_cache_before_default=>'NO',p_prompt=>'Delivery Address',p_source=>'USER_DELIVERY_ADDRESS',p_source_type=>'DB_COLUMN',p_display_as=>'NATIVE_TEXTAREA',p_cSize=>60,p_cMaxlength=>240,p_cHeight=>4,p_field_template=>wwv_flow_api.id(327292952744455582),p_item_template_options=>'#DEFAULT#',p_attribute_01=>'Y',p_attribute_02=>'N',p_attribute_03=>'N',p_attribute_04=>'BOTH');wwv_flow_api.create_page_item( p_id=>wwv_flow_api.id(328679916895216339),p_name=>'P201_SAME_ADDRESS',p_item_sequence=>90,p_item_plug_id=>wwv_flow_api.id(327527288730048954),p_item_default=>'Y',p_prompt=>'Use same address for delivery ?',p_display_as=>'NATIVE_SELECT_LIST',p_lov=>'STATIC2:No;N,Yes;Y',p_cHeight=>1,p_field_template=>wwv_flow_api.id(327292952744455582),p_item_template_options=>'#DEFAULT#',p_lov_display_extra=>'NO',p_attribute_01=>'NONE',p_attribute_02=>'N');wwv_flow_api.create_page_computation( p_id=>wwv_flow_api.id(329197612007339546),p_computation_sequence=>10,p_computation_item=>'P201_USER_DELIVERY_ADDRESS',p_computation_type=>'ITEM_VALUE',p_computation=>'P201_USER_INVOICING_ADDRESS',p_compute_when=>'P201_SAME_ADDRESS',p_compute_when_text=>'Y',p_compute_when_type=>'VAL_OF_ITEM_IN_COND_EQ_COND2');wwv_flow_api.create_page_computation( p_id=>wwv_flow_api.id(327594186781222308),p_computation_sequence=>10,p_computation_item=>'P201_ROLE',p_computation_point=>'BEFORE_BOX_BODY',p_computation_type=>'QUERY_COLON',p_computation=>'select role_code from SOK_USER_ROLE_VW where user_id = :P201_USER_ID;');wwv_flow_api.create_page_validation( p_id=>wwv_flow_api.id(328679452120216334),p_validation_name=>'Check firstname length',p_validation_sequence=>20,p_validation=>wwv_flow_string.join(wwv_flow_t_varchar2('declare','begin','  logger.log(1);','  if LENGTH(:P201_USER_FIRSTNAME) >= 2 then','    return true;','  else','    return false;','  end if;','end;')),p_validation_type=>'FUNC_BODY_RETURNING_BOOLEAN',p_error_message=>'User''s firstname needs to contain at least 2 characters. Please review and update.',p_always_execute=>'N',p_validation_condition=>'CREATE, SAVE',p_validation_condition_type=>'REQUEST_IN_CONDITION',p_associated_item=>wwv_flow_api.id(327531121600048987),p_error_display_location=>'INLINE_WITH_FIELD_AND_NOTIFICATION');wwv_flow_api.create_page_validation( p_id=>wwv_flow_api.id(328679575574216335),p_validation_name=>'Check lastname length',p_validation_sequence=>30,p_validation=>wwv_flow_string.join(wwv_flow_t_varchar2('declare','begin','  if LENGTH(:P201_USER_LASTNAME) >= 2 then','    logger.log(2);','    return true;','  else','    return false;','  end if;','end;')),p_validation_type=>'FUNC_BODY_RETURNING_BOOLEAN',p_error_message=>'User''s lastname needs to contain at least 2 characters. Please review and update.',p_always_execute=>'N',p_validation_condition=>'CREATE, SAVE',p_validation_condition_type=>'REQUEST_IN_CONDITION',p_associated_item=>wwv_flow_api.id(327531581984048990),p_error_display_location=>'INLINE_WITH_FIELD_AND_NOTIFICATION');wwv_flow_api.create_page_validation( p_id=>wwv_flow_api.id(328679590304216336),p_validation_name=>'Check if email in right format',p_validation_sequence=>40,p_validation=>wwv_flow_string.join(wwv_flow_t_varchar2('declare','begin','  return REGEXP_LIKE (:P201_USER_EMAIL,''^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$'');','end;')),p_validation_type=>'FUNC_BODY_RETURNING_BOOLEAN',p_error_message=>'User''s email is not in right format. Please review and update.',p_always_execute=>'N',p_validation_condition=>'CREATE, SAVE',p_validation_condition_type=>'REQUEST_IN_CONDITION',p_associated_item=>wwv_flow_api.id(327531904913048992),p_error_display_location=>'INLINE_WITH_FIELD_AND_NOTIFICATION');wwv_flow_api.create_page_validation( p_id=>wwv_flow_api.id(328679751523216337),p_validation_name=>'Check password length',p_validation_sequence=>50,p_validation=>wwv_flow_string.join(wwv_flow_t_varchar2('declare','begin','  if LENGTH(:P201_USER_PASSWORD) >= 6 then','    return true;','  else','    return false;','  end if;','end;')),p_validation_type=>'FUNC_BODY_RETURNING_BOOLEAN',p_error_message=>'User''s password needs to contain at least 6 characters.',p_always_execute=>'N',p_when_button_pressed=>wwv_flow_api.id(327527646758048956),p_associated_item=>wwv_flow_api.id(327532306500048992),p_error_display_location=>'INLINE_WITH_FIELD_AND_NOTIFICATION');wwv_flow_api.create_page_validation( p_id=>wwv_flow_api.id(329197725486339547),p_validation_name=>'Check user delivery address',p_validation_sequence=>60,p_validation=>'P201_USER_DELIVERY_ADDRESS',p_validation_type=>'ITEM_NOT_NULL',p_error_message=>'#LABEL# must have some value.',p_always_execute=>'N',p_validation_condition=>'P201_SAME_ADDRESS',p_validation_condition2=>'N',p_validation_condition_type=>'VAL_OF_ITEM_IN_COND_EQ_COND2',p_associated_item=>wwv_flow_api.id(327533526583048993),p_error_display_location=>'INLINE_WITH_FIELD_AND_NOTIFICATION');wwv_flow_api.create_page_validation( p_id=>wwv_flow_api.id(394556344830987631),p_validation_name=>'Check user to delete has not admin role',p_validation_sequence=>70,p_validation=>wwv_flow_string.join(wwv_flow_t_varchar2('declare','    loc_role    SOK_ROLE_LU.role_code%TYPE := null;','begin','    select role_code','    into loc_role','    from sok_user_role_vw ','    where user_id = :P201_USER_ID and role_code = ''ADMIN'';','    ','    if loc_role = ''ADMIN'' then','        return false;','    else','        return true;','    end if;','end;')),p_validation_type=>'FUNC_BODY_RETURNING_BOOLEAN',p_error_message=>'The selected user is also administrator. It cannot be deleted by another administrator. ',p_always_execute=>'N',p_validation_condition_type=>'NEVER',p_when_button_pressed=>wwv_flow_api.id(327527818534048956),p_error_display_location=>'INLINE_IN_NOTIFICATION');wwv_flow_api.create_page_da_event( p_id=>wwv_flow_api.id(327528455282048956),p_name=>'Cancel Dialog',p_event_sequence=>10,p_triggering_element_type=>'BUTTON',p_triggering_button_id=>wwv_flow_api.id(327528363027048956),p_bind_type=>'bind',p_bind_event_type=>'click');wwv_flow_api.create_page_da_action( p_id=>wwv_flow_api.id(327529280941048962),p_event_id=>wwv_flow_api.id(327528455282048956),p_event_result=>'TRUE',p_action_sequence=>10,p_execute_on_page_init=>'N',p_action=>'NATIVE_DIALOG_CANCEL',p_stop_execution_on_error=>'Y');wwv_flow_api.create_page_da_event( p_id=>wwv_flow_api.id(328680027642216340),p_name=>'Invoicing and delivery address ',p_event_sequence=>20,p_triggering_element_type=>'ITEM',p_triggering_element=>'P201_SAME_ADDRESS',p_condition_element=>'P201_SAME_ADDRESS',p_triggering_condition_type=>'EQUALS',p_triggering_expression=>'Y',p_bind_type=>'bind',p_bind_event_type=>'change');wwv_flow_api.create_page_da_action( p_id=>wwv_flow_api.id(328680168993216341),p_event_id=>wwv_flow_api.id(328680027642216340),p_event_result=>'TRUE',p_action_sequence=>10,p_execute_on_page_init=>'Y',p_action=>'NATIVE_HIDE',p_affected_elements_type=>'ITEM',p_affected_elements=>'P201_USER_DELIVERY_ADDRESS',p_attribute_01=>'N');wwv_flow_api.create_page_da_action( p_id=>wwv_flow_api.id(328680212525216342),p_event_id=>wwv_flow_api.id(328680027642216340),p_event_result=>'FALSE',p_action_sequence=>10,p_execute_on_page_init=>'Y',p_action=>'NATIVE_SHOW',p_affected_elements_type=>'ITEM',p_affected_elements=>'P201_USER_DELIVERY_ADDRESS',p_attribute_01=>'N');wwv_flow_api.create_page_da_action( p_id=>wwv_flow_api.id(329195207837339522),p_event_id=>wwv_flow_api.id(328680027642216340),p_event_result=>'TRUE',p_action_sequence=>20,p_execute_on_page_init=>'Y',p_action=>'NATIVE_SET_VALUE',p_affected_elements_type=>'ITEM',p_affected_elements=>'P201_USER_DELIVERY_ADDRESS',p_attribute_01=>'STATIC_ASSIGNMENT',p_attribute_02=>'&P201_USER_INVOICING_ADDRESS.',p_attribute_09=>'N',p_stop_execution_on_error=>'Y',p_wait_for_result=>'Y');wwv_flow_api.create_page_da_action( p_id=>wwv_flow_api.id(329195333109339523),p_event_id=>wwv_flow_api.id(328680027642216340),p_event_result=>'FALSE',p_action_sequence=>20,p_execute_on_page_init=>'Y',p_action=>'NATIVE_SET_VALUE',p_affected_elements_type=>'ITEM',p_affected_elements=>'P201_USER_DELIVERY_ADDRESS',p_attribute_01=>'STATIC_ASSIGNMENT',p_attribute_02=>'&P201_USER_DELIVERY_ADDRESS.',p_attribute_09=>'N',p_stop_execution_on_error=>'Y',p_wait_for_result=>'Y');wwv_flow_api.create_page_process( p_id=>wwv_flow_api.id(327534296741048993),p_process_sequence=>10,p_process_point=>'AFTER_HEADER',p_process_type=>'NATIVE_FORM_FETCH',p_process_name=>'Fetch Row from SOK_USER',p_attribute_02=>'SOK_USER',p_attribute_03=>'P201_USER_ID',p_attribute_04=>'USER_ID',p_error_display_location=>'INLINE_IN_NOTIFICATION',p_security_scheme=>wwv_flow_api.id(328224405980893970));wwv_flow_api.create_page_process( p_id=>wwv_flow_api.id(327534706949048993),p_process_sequence=>20,p_process_point=>'AFTER_SUBMIT',p_process_type=>'NATIVE_PLSQL',p_process_name=>'Process on create ',p_process_sql_clob=>wwv_flow_string.join(wwv_flow_t_varchar2('declare','  loc_same_address VARCHAR2(150) := :P201_SAME_ADDRESS;','  loc_user_invoicing_address SOK_USER.user_invoicing_address%TYPE := :P201_USER_INVOICING_ADDRESS;','  loc_user_delivery_address SOK_USER.user_delivery_address%TYPE := :P201_USER_DELIVERY_ADDRESS;','begin','  if :P201_SAME_ADDRESS = ''yes'' then','    :P201_USER_DELIVERY_ADDRESS := :P201_USER_INVOICING_ADDRESS;','    ','  end if;',' :P201_USER_ID := SOK_USER_UTIL.c_user(','    val_user_firstname => :P201_USER_FIRSTNAME,','    val_user_lastname => :P201_USER_LASTNAME,','    val_user_email => :P201_USER_EMAIL,','    val_user_phone => :P201_USER_PHONE,','    val_user_password => :P201_USER_PASSWORD,','    val_user_invoicing_address => :P201_USER_INVOICING_ADDRESS,','    val_user_delivery_address => :P201_USER_DELIVERY_ADDRESS','  );','  ','end;')),p_process_error_message=>'New user could not be created.',p_error_display_location=>'INLINE_IN_NOTIFICATION',p_process_when_button_id=>wwv_flow_api.id(327527646758048956),p_security_scheme=>wwv_flow_api.id(328224405980893970));wwv_flow_api.create_page_process( p_id=>wwv_flow_api.id(328678435007216324),p_process_sequence=>30,p_process_point=>'AFTER_SUBMIT',p_process_type=>'NATIVE_PLSQL',p_process_name=>'Process on update',p_process_sql_clob=>wwv_flow_string.join(wwv_flow_t_varchar2('declare','  loc_user_password SOK_USER.user_password%TYPE;','begin','','  --if loc_same_address = ''yes'' then','    --loc_user_delivery_address := loc_user_invoicing_address;','  --end if;','  select user_password into loc_user_password','  from SOK_USER','  where user_id = :P201_USER_ID;','  ','  SOK_USER_UTIL.u_user(','    val_user_id => :P201_USER_ID,','    val_user_firstname => :P201_USER_FIRSTNAME,','    val_user_lastname => :P201_USER_LASTNAME,','    val_user_email => :P201_USER_EMAIL,','    val_user_password => loc_user_password,','    val_user_phone => :P201_USER_PHONE,','    val_user_invoicing_address => :P201_USER_INVOICING_ADDRESS,','    val_user_delivery_address => :P201_USER_DELIVERY_ADDRESS','  );','end;')),p_process_error_message=>'User''s details could not be updated.',p_error_display_location=>'INLINE_IN_NOTIFICATION',p_process_when_button_id=>wwv_flow_api.id(327527719613048956),p_security_scheme=>wwv_flow_api.id(328321042163774142));wwv_flow_api.create_page_process( p_id=>wwv_flow_api.id(327594791681222315),p_process_sequence=>40,p_process_point=>'AFTER_SUBMIT',p_process_type=>'NATIVE_PLSQL',p_process_name=>'Process on delete',p_process_sql_clob=>wwv_flow_string.join(wwv_flow_t_varchar2('BEGIN','    sok_user_role_util.d_all_user_role(val_user_id => :p201_user_id);','    sok_user_util.d_user(val_user_id => :p201_user_id);','EXCEPTION ','    WHEN OTHERS then','    logger.log_error(''Process "Delete user" failed. ''||SQLERRM);','    raise_application_error(-20001, ''Process "Delete user" failed. ''||SQLERRM);   ','END;')),p_process_error_message=>'User could not be deleted.',p_error_display_location=>'INLINE_IN_NOTIFICATION',p_process_when_button_id=>wwv_flow_api.id(327527818534048956),p_process_when=>'P201_USER_ID',p_process_when_type=>'ITEM_IS_NOT_NULL',p_security_scheme=>wwv_flow_api.id(328224405980893970));wwv_flow_api.create_page_process( p_id=>wwv_flow_api.id(327400011465290337),p_process_sequence=>50,p_process_point=>'AFTER_SUBMIT',p_process_type=>'NATIVE_PLSQL',p_process_name=>'User role management ',p_process_sql_clob=>wwv_flow_string.join(wwv_flow_t_varchar2('DECLARE','    loc_role_array   apex_t_varchar2 := apex_string.split(:p201_role, '':'');','BEGIN','    sok_user_role_util.d_all_user_role(val_user_id => :p201_user_id);','    IF :request IN (','        ''CREATE'',','        ''SAVE''','    ) THEN','        FOR i IN 1..loc_role_array.count LOOP','            sok_user_role_util.c_user_role(val_user_id => :p201_user_id, val_role_code => loc_role_array(i));','            logger.log(''Role'' || loc_role_array(i));','        END LOOP;','','    END IF;','','END;')),p_error_display_location=>'INLINE_IN_NOTIFICATION',p_process_when=>'CREATE, SAVE',p_process_when_type=>'REQUEST_IN_CONDITION');wwv_flow_api.create_page_process( p_id=>wwv_flow_api.id(327535113119048995),p_process_sequence=>60,p_process_point=>'AFTER_SUBMIT',p_process_type=>'NATIVE_SESSION_STATE',p_process_name=>'reset page',p_attribute_01=>'CLEAR_CACHE_CURRENT_PAGE',p_error_display_location=>'INLINE_IN_NOTIFICATION',p_process_when_button_id=>wwv_flow_api.id(327527818534048956));wwv_flow_api.create_page_process( p_id=>wwv_flow_api.id(327535500021048995),p_process_sequence=>70,p_process_point=>'AFTER_SUBMIT',p_process_type=>'NATIVE_CLOSE_WINDOW',p_process_name=>'Close Dialog',p_error_display_location=>'INLINE_IN_NOTIFICATION',p_process_success_message=>'Action processed.');end;/