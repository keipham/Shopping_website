prompt --application/pages/page_00014beginwwv_flow_api.create_page( p_id=>14,p_user_interface_id=>wwv_flow_api.id(327304041051455600),p_name=>'Orders',p_page_mode=>'NORMAL',p_step_title=>'Orders',p_step_sub_title_type=>'TEXT_WITH_SUBSTITUTIONS',p_first_item=>'NO_FIRST_ITEM',p_autocomplete_on_off=>'OFF',p_inline_css=>wwv_flow_string.join(wwv_flow_t_varchar2('','body{','    font-family: ''Comic Sans MS'';','}')),p_page_template_options=>'#DEFAULT#',p_required_role=>wwv_flow_api.id(328224405980893970),p_overwrite_navigation_list=>'N',p_page_is_public_y_n=>'N',p_cache_mode=>'NOCACHE',p_last_updated_by=>'defaultUser',p_last_upd_yyyymmddhh24miss=>'20000101000000');wwv_flow_api.create_page_plug( p_id=>wwv_flow_api.id(345819990537557526),p_plug_name=>'Breadcrumb',p_region_template_options=>'#DEFAULT#:t-BreadcrumbRegion--useBreadcrumbTitle',p_component_template_options=>'#DEFAULT#',p_plug_template=>wwv_flow_api.id(327274899983455556),p_plug_display_sequence=>10,p_include_in_reg_disp_sel_yn=>'Y',p_plug_display_point=>'REGION_POSITION_01',p_menu_id=>wwv_flow_api.id(327305317139455601),p_plug_source_type=>'NATIVE_BREADCRUMB',p_menu_template_id=>wwv_flow_api.id(327293780686455585),p_plug_query_options=>'DERIVED_REPORT_COLUMNS');wwv_flow_api.create_page_plug( p_id=>wwv_flow_api.id(346433753132390887),p_plug_name=>'Orders',p_region_template_options=>'#DEFAULT#',p_plug_template=>wwv_flow_api.id(327269938950455546),p_plug_display_sequence=>10,p_include_in_reg_disp_sel_yn=>'N',p_plug_display_point=>'BODY',p_plug_source=>wwv_flow_string.join(wwv_flow_t_varchar2('select distinct a.ORDER_ID, ','                a.ORDER_CREATED_DATE,','                b.ORDER_STATUS_NAME,','                a.USER_ID,','                lower(f.user_email),','                d.TOTAL_PRODUCT_QUANTITY,','                e.COUNT_DISTINCT_PRODUCT,','                c.TOTAL_PRICE,','                ''''DETAILS','from SOK_ORDER_CONTENT_DETAIL_VW a','inner join SOK_ORDER_STATUS_LU b','on b.order_status_code = a.order_status_code','inner join (select order_id, SUM(product_total_price) as TOTAL_PRICE','            from SOK_ORDER_CONTENT_DETAIL_VW  ','            group by order_id)c','on c.order_id = a.order_id ','inner join (select order_id, SUM(order_product_quantity) as TOTAL_PRODUCT_QUANTITY','            from SOK_ORDER_CONTENT_DETAIL_VW ','            group by order_id)d','on d.order_id = c.order_id','inner join (select order_id, COUNT(product_id) as COUNT_DISTINCT_PRODUCT','            from SOK_ORDER_CONTENT_DETAIL_VW ','            group by order_id)e','on e.order_id = d.order_id','inner join SOK_USER_ROLE_VW f','on f.user_id = a.user_id','order by order_id desc','  ')),p_plug_source_type=>'NATIVE_IR',p_plug_query_row_template=>1,p_plug_query_options=>'DERIVED_REPORT_COLUMNS');wwv_flow_api.create_worksheet( p_id=>wwv_flow_api.id(346434165029390887),p_name=>'Report 1',p_max_row_count=>'1000000',p_max_row_count_message=>'The maximum row count for this report is #MAX_ROW_COUNT# rows.  Please apply a filter to reduce the number of records in your query.',p_no_data_found_message=>'No data found.',p_show_nulls_as=>'-',p_pagination_type=>'ROWS_X_TO_Y',p_pagination_display_pos=>'BOTTOM_RIGHT',p_report_list_mode=>'TABS',p_show_detail_link=>'C',p_download_formats=>'CSV:HTML:EMAIL:XLS:PDF:RTF',p_detail_link=>'f?p=&APP_ID.:15:&APP_SESSION.::::P15_ORDER_ID:#ORDER_ID#',p_detail_link_text=>'<img src="#IMAGE_PREFIX#app_ui/img/icons/apex-edit-pencil.png" class="apex-edit-pencil" alt="Edit">',p_detail_link_auth_scheme=>wwv_flow_api.id(328224405980893970),p_owner=>'KPQ',p_internal_uid=>346434775029390887);wwv_flow_api.create_worksheet_column( p_id=>wwv_flow_api.id(346435484952390892),p_db_column_name=>'USER_ID',p_display_order=>4,p_column_identifier=>'D',p_column_label=>'User Id',p_column_type=>'NUMBER',p_column_alignment=>'CENTER');wwv_flow_api.create_worksheet_column( p_id=>wwv_flow_api.id(345818039061557506),p_db_column_name=>'ORDER_ID',p_display_order=>14,p_column_identifier=>'E',p_column_label=>'Order id',p_column_type=>'NUMBER',p_column_alignment=>'CENTER');wwv_flow_api.create_worksheet_column( p_id=>wwv_flow_api.id(345818195536557508),p_db_column_name=>'ORDER_STATUS_NAME',p_display_order=>34,p_column_identifier=>'G',p_column_label=>'Status',p_column_type=>'STRING',p_column_alignment=>'CENTER');wwv_flow_api.create_worksheet_column( p_id=>wwv_flow_api.id(345818366274557509),p_db_column_name=>'DETAILS',p_display_order=>44,p_column_identifier=>'H',p_column_label=>'Details',p_column_link=>'f?p=&APP_ID.:16:&SESSION.::&DEBUG.:RP,16:P16_ORDER_ID:#ORDER_ID#',p_column_linktext=>'<img src="#IMAGE_PREFIX#app_ui/img/icons/apex-edit-view.png" class="apex-edit-view" alt="">',p_column_type=>'STRING',p_column_alignment=>'CENTER');wwv_flow_api.create_worksheet_column( p_id=>wwv_flow_api.id(351687542075319242),p_db_column_name=>'ORDER_CREATED_DATE',p_display_order=>54,p_column_identifier=>'I',p_column_label=>'Created date',p_column_type=>'DATE',p_column_alignment=>'CENTER',p_tz_dependent=>'N');wwv_flow_api.create_worksheet_column( p_id=>wwv_flow_api.id(351688310451319250),p_db_column_name=>'TOTAL_PRICE',p_display_order=>64,p_column_identifier=>'J',p_column_label=>'Total Paid(â‚¬)',p_column_type=>'NUMBER',p_column_alignment=>'CENTER');wwv_flow_api.create_worksheet_column( p_id=>wwv_flow_api.id(382898198218154214),p_db_column_name=>'TOTAL_PRODUCT_QUANTITY',p_display_order=>84,p_column_identifier=>'N',p_column_label=>'Total quantity',p_column_type=>'NUMBER',p_column_alignment=>'CENTER');wwv_flow_api.create_worksheet_column( p_id=>wwv_flow_api.id(382898295768154215),p_db_column_name=>'COUNT_DISTINCT_PRODUCT',p_display_order=>94,p_column_identifier=>'O',p_column_label=>'#Product(s)',p_column_type=>'NUMBER',p_column_alignment=>'CENTER');wwv_flow_api.create_worksheet_column( p_id=>wwv_flow_api.id(382898481227154216),p_db_column_name=>'LOWER(F.USER_EMAIL)',p_display_order=>104,p_column_identifier=>'P',p_column_label=>'Email',p_column_type=>'STRING',p_column_alignment=>'CENTER');wwv_flow_api.create_worksheet_rpt( p_id=>wwv_flow_api.id(346438712813393426),p_application_user=>'APXWS_DEFAULT',p_report_seq=>10,p_report_alias=>'3464394',p_status=>'PUBLIC',p_is_default=>'Y',p_display_rows=>50,p_report_columns=>'DETAILS:ORDER_ID:ORDER_CREATED_DATE:USER_ID:LOWER(F.USER_EMAIL):ORDER_STATUS_NAME:COUNT_DISTINCT_PRODUCT:TOTAL_PRODUCT_QUANTITY:TOTAL_PRICE:',p_flashback_enabled=>'N');wwv_flow_api.create_page_plug( p_id=>wwv_flow_api.id(386991084352327734),p_plug_name=>'Number of Orders on the Last 10 Days',p_region_template_options=>'#DEFAULT#:t-Region--scrollBody',p_escape_on_http_output=>'Y',p_plug_template=>wwv_flow_api.id(327270464207455548),p_plug_display_sequence=>20,p_include_in_reg_disp_sel_yn=>'Y',p_plug_display_point=>'BODY',p_plug_source_type=>'NATIVE_JET_CHART',p_plug_query_num_rows=>15,p_plug_query_options=>'DERIVED_REPORT_COLUMNS',p_plug_display_condition_type=>'EXISTS',p_plug_display_when_condition=>'select * from SOK_ORDER_CONTENT_DETAIL_VW');wwv_flow_api.create_jet_chart( p_id=>wwv_flow_api.id(386991114469327735),p_region_id=>wwv_flow_api.id(386991084352327734),p_chart_type=>'bar',p_animation_on_display=>'none',p_animation_on_data_change=>'none',p_orientation=>'vertical',p_data_cursor=>'auto',p_data_cursor_behavior=>'auto',p_hover_behavior=>'none',p_stack=>'off',p_zoom_and_scroll=>'off',p_tooltip_rendered=>'Y',p_show_series_name=>true,p_show_group_name=>true,p_show_value=>true,p_show_label=>true,p_legend_rendered=>'off');wwv_flow_api.create_jet_chart_series( p_id=>wwv_flow_api.id(386991239028327736),p_chart_id=>wwv_flow_api.id(386991114469327735),p_seq=>10,p_name=>'Number of Orders',p_data_source_type=>'SQL_QUERY',p_data_source=>wwv_flow_string.join(wwv_flow_t_varchar2('select null, ','       order_date, ','       NB_OF_ORDER,','       CASE','         WHEN NB_OF_ORDER = 1 THEN NB_OF_ORDER||'' order was placed on ''||order_date','         WHEN NB_OF_ORDER > 1 THEN NB_OF_ORDER||'' orders were placed on ''||order_date ','       END as TOOLTIP','from (select SUBSTR(TO_DATE(order_created_date, ''DD/MM/YYYY''),0,11) as order_date,','             count(order_id) as NB_OF_ORDER','      from SOK_ORDER_CONTENT_DETAIL_VW ','      group by TO_DATE(order_created_date, ''DD/MM/YYYY'')','      order by order_date asc)','FETCH NEXT 10 ROWS ONLY')),p_items_value_column_name=>'NB_OF_ORDER',p_items_label_column_name=>'ORDER_DATE',p_items_short_desc_column_name=>'TOOLTIP',p_assigned_to_y2=>'off',p_items_label_rendered=>false);wwv_flow_api.create_jet_chart_axis( p_id=>wwv_flow_api.id(386991372915327737),p_chart_id=>wwv_flow_api.id(386991114469327735),p_axis=>'x',p_is_rendered=>'on',p_format_scaling=>'auto',p_scaling=>'linear',p_baseline_scaling=>'zero',p_major_tick_rendered=>'on',p_minor_tick_rendered=>'off',p_tick_label_rendered=>'on',p_tick_label_rotation=>'auto',p_tick_label_position=>'outside');wwv_flow_api.create_jet_chart_axis( p_id=>wwv_flow_api.id(386991449726327738),p_chart_id=>wwv_flow_api.id(386991114469327735),p_axis=>'y',p_is_rendered=>'on',p_title=>'Number of Orders',p_format_scaling=>'auto',p_scaling=>'linear',p_baseline_scaling=>'zero',p_position=>'auto',p_major_tick_rendered=>'on',p_minor_tick_rendered=>'off',p_tick_label_rendered=>'on');wwv_flow_api.create_page_plug( p_id=>wwv_flow_api.id(386991650236327740),p_plug_name=>'Number of Orders by Status',p_region_template_options=>'#DEFAULT#:t-Region--scrollBody',p_escape_on_http_output=>'Y',p_plug_template=>wwv_flow_api.id(327270464207455548),p_plug_display_sequence=>30,p_include_in_reg_disp_sel_yn=>'Y',p_plug_new_grid_row=>false,p_plug_display_point=>'BODY',p_plug_source_type=>'NATIVE_JET_CHART',p_plug_query_num_rows=>15,p_plug_query_options=>'DERIVED_REPORT_COLUMNS',p_plug_display_condition_type=>'EXISTS',p_plug_display_when_condition=>'select * from SOK_ORDER_CONTENT_DETAIL_VW');wwv_flow_api.create_jet_chart( p_id=>wwv_flow_api.id(386991711028327741),p_region_id=>wwv_flow_api.id(386991650236327740),p_chart_type=>'bar',p_animation_on_display=>'none',p_animation_on_data_change=>'none',p_orientation=>'horizontal',p_data_cursor=>'auto',p_data_cursor_behavior=>'auto',p_hide_and_show_behavior=>'none',p_hover_behavior=>'none',p_stack=>'off',p_zoom_and_scroll=>'off',p_tooltip_rendered=>'Y',p_show_series_name=>true,p_show_group_name=>true,p_show_value=>true,p_show_label=>true,p_legend_rendered=>'on',p_legend_position=>'auto');wwv_flow_api.create_jet_chart_series( p_id=>wwv_flow_api.id(386991828891327742),p_chart_id=>wwv_flow_api.id(386991711028327741),p_seq=>10,p_name=>'Number of Orders Status',p_data_source_type=>'SQL_QUERY',p_data_source=>wwv_flow_string.join(wwv_flow_t_varchar2('/*select distinct b.order_status_name, count(distinct a.order_id) as Count','from SOK_ORDER_CONTENT_DETAIL_VW a','inner join SOK_ORDER_STATUS_LU b','on b.order_status_code = a.order_status_code','group by b.order_status_name','order by order_status_name asc*/','select distinct b.order_status_name, ','                NVL(count(distinct a.order_id),0) as Count,','                CASE','                  WHEN count(distinct a.order_id) = 1 THEN ''There is currently ''||NVL(count(distinct a.order_id),0)||'' order with status "''||b.order_status_name||'' " '' ','                  WHEN count(distinct a.order_id) > 1 THEN ''There are currently ''||NVL(count(distinct a.order_id),0)||'' orders with status "''||b.order_status_name||''" '' ','                END as TOOLTIP','from SOK_ORDER_CONTENT_DETAIL_VW a','inner join SOK_ORDER_STATUS_LU b','on b.order_status_code = a.order_status_code','where b.order_status_code != ''CANCELLED'' and b.order_status_code != ''DELIVERED'' ','group by b.order_status_name','order by order_status_name asc')),p_series_name_column_name=>'ORDER_STATUS_NAME',p_items_value_column_name=>'COUNT',p_items_label_column_name=>'ORDER_STATUS_NAME',p_items_short_desc_column_name=>'TOOLTIP',p_assigned_to_y2=>'off',p_items_label_rendered=>false);wwv_flow_api.create_jet_chart_axis( p_id=>wwv_flow_api.id(386992066382327744),p_chart_id=>wwv_flow_api.id(386991711028327741),p_axis=>'y',p_is_rendered=>'on',p_title=>'Number of Orders',p_format_scaling=>'auto',p_scaling=>'linear',p_baseline_scaling=>'zero',p_position=>'auto',p_major_tick_rendered=>'on',p_min_step=>1,p_minor_tick_rendered=>'off',p_tick_label_rendered=>'on');wwv_flow_api.create_jet_chart_axis( p_id=>wwv_flow_api.id(386991890560327743),p_chart_id=>wwv_flow_api.id(386991711028327741),p_axis=>'x',p_is_rendered=>'on',p_format_scaling=>'auto',p_scaling=>'linear',p_baseline_scaling=>'zero',p_major_tick_rendered=>'on',p_minor_tick_rendered=>'off',p_tick_label_rendered=>'on',p_tick_label_rotation=>'auto',p_tick_label_position=>'outside');wwv_flow_api.create_page_da_event( p_id=>wwv_flow_api.id(346435817703390893),p_name=>'on dialog close',p_event_sequence=>10,p_triggering_element_type=>'REGION',p_triggering_region_id=>wwv_flow_api.id(346433753132390887),p_bind_type=>'bind',p_bind_event_type=>'apexafterclosedialog');wwv_flow_api.create_page_da_action( p_id=>wwv_flow_api.id(377932342058039996),p_event_id=>wwv_flow_api.id(346435817703390893),p_event_result=>'TRUE',p_action_sequence=>10,p_execute_on_page_init=>'N',p_action=>'NATIVE_JAVASCRIPT_CODE',p_attribute_01=>'apex.message.showPageSuccess(this.data.successMessage.text)');wwv_flow_api.create_page_da_action( p_id=>wwv_flow_api.id(346436380357390896),p_event_id=>wwv_flow_api.id(346435817703390893),p_event_result=>'TRUE',p_action_sequence=>20,p_execute_on_page_init=>'N',p_action=>'NATIVE_REFRESH',p_affected_elements_type=>'REGION',p_affected_region_id=>wwv_flow_api.id(346433753132390887));wwv_flow_api.create_page_da_action( p_id=>wwv_flow_api.id(386992159855327745),p_event_id=>wwv_flow_api.id(346435817703390893),p_event_result=>'TRUE',p_action_sequence=>30,p_execute_on_page_init=>'N',p_action=>'NATIVE_REFRESH',p_affected_elements_type=>'REGION',p_affected_region_id=>wwv_flow_api.id(386991650236327740));wwv_flow_api.create_page_da_action( p_id=>wwv_flow_api.id(386992268899327746),p_event_id=>wwv_flow_api.id(346435817703390893),p_event_result=>'TRUE',p_action_sequence=>40,p_execute_on_page_init=>'N',p_action=>'NATIVE_REFRESH',p_affected_elements_type=>'REGION',p_affected_region_id=>wwv_flow_api.id(386991084352327734));end;/